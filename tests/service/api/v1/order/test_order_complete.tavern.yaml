---

test_name: Make sure server implements crud functionality for order endpoint

variables:
  dough_name: "Neapolitan"
  dough_price: 5.20
  dough_description: "Neapolitan Dough"
  dough_stock: 10


stages:

  - name: Verify that status code equals 201 when we create a new dough and the dough is returned
    request:
      url: http://{tavern.env_vars.API_SERVER}:{tavern.env_vars.API_PORT}/v1/doughs
      json: &dough
        name: "{dough_name:s}"
        price: !float "{dough_price:f}"
        description: "{dough_description}"
        stock: !int "{dough_stock:d}"
      method: POST
    response:
      status_code: 201
      json:
        <<: *dough
        id: !anything
      save:
        json:
          dough_id: id










#---------------------Delete Everything-----------------------------------
  #Delete Dough
  - name: Delete created dough with id
    request:
      url: http://{tavern.env_vars.API_SERVER}:{tavern.env_vars.API_PORT}/v1/doughs/{dough_id}
      method: DELETE
    response:
      status_code: 204



